
Steps for k8s project :- 

Note :- 
open docker desktop --> login into it ---> minikube start now 

1) clone this into your local machine  .

2) create a docker image for backend and frontend locally and push it to docker hub so u can use it into your container image

commands :- 
got to backend path
docker build -t "username"/"repo-name":"tagname" .    

eg:- 
docker build -t pvk1036/chatapp-backend:latest  //local image builded 
same for frontend as well.

docker push pvk1036/chatapp-backend:latest  //will push to hub

Note:- 
as we logged into docker desktop no need to login 
optional --> go to docker hub and create token for username password and log into termminal so u can push into docker hub

3)Now start your project creation

Namespace --> Storage --> service --> deployment 

STEPS-->
i) create namespace

ii) MONGO --->

create pv for mongo:---
kubectl get pv
-->
kubectl get pv
NAME       CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
mongo-pv   5Gi        RWO            Retain           Available                          <unset>                          4m26s

create pvc for mongo now  :---
kubectl get pvc

create deployment.yml for mongodb 

Enter into shell now to test mongo is working fine or not :--

kubectl exec -it "podname" -n chat-app -- bash
mongosh -u "$MONGO_INITDB_ROOT_USERNAME" -p "$MONGO_INITDB_ROOT_PASSWORD" --authenticationDatabase admin  //for login using mongosh
show dbs 
show collections

Note :- To see mountpaths or total storage inside minikube cluster :- minikube ssh ---> df -kh --> u will see now --> exit

iii) Frontend --->

to see pods and svc in current namespace :- kubectl get svc frontend -n chat-app

while created service and deployment of frontend got below error in pod:- 

PS C:\Users\Prajwal\OneDrive\Desktop\programs\Kubernetes projects\ChatApp_with_kubernetes> kubectl logs frontend-deployment-65b687ff-kw6qf -n chat-app
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: /etc/nginx/conf.d/default.conf differs from the packaged version
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
nginx: [emerg] host not found in upstream "backend" in /etc/nginx/conf.d/default.conf:15
error: the server doesn't have a resource type "deploymment"

Trooubleshoot :- saw dockerfile ==> u will see nginx.conf is copied into docker container path inside this file backend api is required to listen on 5001 port so 
backend service deployed and then frontend worked properly.




